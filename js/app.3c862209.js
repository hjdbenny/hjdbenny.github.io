(function(e){function t(t){for(var a,n,c=t[0],u=t[1],i=t[2],l=0,d=[];l<c.length;l++)n=c[l],Object.prototype.hasOwnProperty.call(o,n)&&o[n]&&d.push(o[n][0]),o[n]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);p&&p(t);while(d.length)d.shift()();return s.push.apply(s,i||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,n=1;n<r.length;n++){var c=r[n];0!==o[c]&&(a=!1)}a&&(s.splice(t--,1),e=u(u.s=r[0]))}return e}var a={},n={app:0},o={app:0},s=[];function c(e){return u.p+"js/"+({}[e]||e)+"."+{"chunk-2773158f":"c02d41dd","chunk-2bf05644":"a1901280","chunk-3095f97f":"889ed2b4","chunk-4a217577":"b2946515","chunk-6217ebc3":"36f9775c","chunk-6c3bf392":"a6d43c1d"}[e]+".js"}function u(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,u),r.l=!0,r.exports}u.e=function(e){var t=[],r={"chunk-2773158f":1,"chunk-2bf05644":1,"chunk-3095f97f":1,"chunk-4a217577":1,"chunk-6217ebc3":1,"chunk-6c3bf392":1};n[e]?t.push(n[e]):0!==n[e]&&r[e]&&t.push(n[e]=new Promise((function(t,r){for(var a="css/"+({}[e]||e)+"."+{"chunk-2773158f":"f3d4e88b","chunk-2bf05644":"4079ff9f","chunk-3095f97f":"2204edde","chunk-4a217577":"b899a104","chunk-6217ebc3":"830bc4c0","chunk-6c3bf392":"33d71ccf"}[e]+".css",o=u.p+a,s=document.getElementsByTagName("link"),c=0;c<s.length;c++){var i=s[c],l=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(l===a||l===o))return t()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){i=d[c],l=i.getAttribute("data-href");if(l===a||l===o)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var a=t&&t.target&&t.target.src||o,s=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=a,delete n[e],p.parentNode.removeChild(p),r(s)},p.href=o;var h=document.getElementsByTagName("head")[0];h.appendChild(p)})).then((function(){n[e]=0})));var a=o[e];if(0!==a)if(a)t.push(a[2]);else{var s=new Promise((function(t,r){a=o[e]=[t,r]}));t.push(a[2]=s);var i,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=c(e);var d=new Error;i=function(t){l.onerror=l.onload=null,clearTimeout(p);var r=o[e];if(0!==r){if(r){var a=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+a+": "+n+")",d.name="ChunkLoadError",d.type=a,d.request=n,r[1](d)}o[e]=void 0}};var p=setTimeout((function(){i({type:"timeout",target:l})}),12e4);l.onerror=l.onload=i,document.head.appendChild(l)}return Promise.all(t)},u.m=e,u.c=a,u.d=function(e,t,r){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(u.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)u.d(r,a,function(t){return e[t]}.bind(null,a));return r},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/",u.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var d=0;d<i.length;d++)t(i[d]);var p=l;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var a=r("85ec"),n=r.n(a);n.a},"56d7":function(e,t,r){"use strict";r.r(t);var a=r("a026"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},o=[],s={data(){return{}},created(){sessionStorage.getItem("store")&&this.$store.replaceState(Object.assign({},this.$store.state,JSON.parse(sessionStorage.getItem("store")))),window.addEventListener("beforeunload",()=>{sessionStorage.setItem("store",JSON.stringify(this.$store.state))})}},c=s,u=(r("034f"),r("2877")),i=Object(u["a"])(c,n,o,!1,null,null,null),l=i.exports,d=r("8c4f"),p=r("2f62"),h=r("bc3a"),f=r.n(h),m=r("5c96"),g=r.n(m);const b=()=>{x.replace({path:"/login"})},v=(e,t)=>{switch(e){default:console.log(t)}};var k=f.a.create({timeout:6e4});k.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",k.interceptors.request.use(e=>{let t=e.url.split("/");if(e.loading&&O.commit("changeLoadStatus",!0),"auth"!=t[t.length-1]){const t=localStorage.getItem("token");t||b(),t.includes("Bearer")?e.headers["Authorization"]=t:e.headers["Authorization"]="Bearer "+t}return e},e=>Promise.error(e)),k.interceptors.response.use(e=>{if(e.headers["www-authenticate"]&&localStorage.setItem("token",e.headers["www-authenticate"]),O.commit("changeLoadStatus",!1),200===e.status)return 0===e.data.code?Promise.resolve(e.data):(m["Message"].error(e.data.message),4014==e.data.code&&b(),Promise.reject(e.data));Promise.reject(e)},e=>{O.commit("changeLoadStatus",!1);const{response:t}=e;return t?(v(t.status,t.data.message),Promise.reject(t)):(m["Message"].error("后台服务连接失败"),window.navigator.onLine?Promise.reject(e):void O.commit("changeNetwork",!1))});var j=k;const w={login(e){return j.post("https://cloudbase-koa-2gj0jhjr761e287a.service.tcloudbase.com/koa-starter/api/auth",e)},getUserInfo(e){return j.get("https://cloudbase-koa-2gj0jhjr761e287a.service.tcloudbase.com/koa-starter/api/user/getUserInfo",{params:e})},updateUserInfo(e){return j.post("https://cloudbase-koa-2gj0jhjr761e287a.service.tcloudbase.com/koa-starter/api/user/updateUserInfo",e)}};var y=w;const I={uploadImage(e){return j.post("https://cloudbase-koa-2gj0jhjr761e287a.service.tcloudbase.com/koa-starter/api/common/uploadImage",e)}};var A=I;const S={getArticle(e){return j.get("https://cloudbase-koa-2gj0jhjr761e287a.service.tcloudbase.com/koa-starter/api/article/getArticle",{params:e})},updateArticle(e){return j.post("https://cloudbase-koa-2gj0jhjr761e287a.service.tcloudbase.com/koa-starter/api/article/updateArticle",e)},addArticle(e){return j.post("https://cloudbase-koa-2gj0jhjr761e287a.service.tcloudbase.com/koa-starter/api/article/addArticle",e)},getArticleList(e){return j.get("https://cloudbase-koa-2gj0jhjr761e287a.service.tcloudbase.com/koa-starter/api/article/getArticleList",{params:e})},deleteArticle(e){return j.delete("https://cloudbase-koa-2gj0jhjr761e287a.service.tcloudbase.com/koa-starter/api/article/deleteArticle",{data:{id:e}})}};var L=S,P={user:y,common:A,article:L};a["default"].use(p["a"]);var O=new p["a"].Store({state:{isHttpLoading:!1,userId:null,userInfo:null,curWritingArticleId:null},mutations:{changeLoadStatus(e,t){e.isHttpLoading=t},setUserId(e,t){e.userId=t},updateUserInfo(e,t){e.userInfo[t.key]=t.value},setCurWritingArticleId(e,t){e.curWritingArticleId=t}},actions:{getUserInfo(e){return new Promise(t=>{P.user.getUserInfo({id:e.state.userId}).then(r=>{e.state.userInfo=r.data,t()})})}},modules:{}});a["default"].use(d["a"]);const _=[{path:"/",redirect:"/login"},{path:"/login",name:"login",component:()=>r.e("chunk-2bf05644").then(r.bind(null,"a55b")),meta:{title:"登录"}},{path:"/home",name:"home",component:()=>r.e("chunk-6c3bf392").then(r.bind(null,"bb51")),meta:{title:"首页"},children:[{path:"personal",name:"personal",component:()=>r.e("chunk-6217ebc3").then(r.bind(null,"90ab")),meta:{title:"个人信息"}},{path:"write_article",name:"WriteArticle",component:()=>r.e("chunk-3095f97f").then(r.bind(null,"8e58")),meta:{title:"写文章"}},{path:"/",name:"ArtcileList",component:()=>r.e("chunk-4a217577").then(r.bind(null,"4e4a")),meta:{title:"文章列表"}},{path:"read_article",name:"ReadArticle",component:()=>r.e("chunk-2773158f").then(r.bind(null,"b1ce")),meta:{title:"阅读文章"}}]}],E=new d["a"]({base:"/",routes:_});E.beforeEach((e,t,r)=>{document.title=e.meta.title,O.commit("changeLoadStatus",!1),r()});var x=E,C=(r("0fae"),r("77ed")),T=r.n(C);a["default"].use(g.a),a["default"].use(T.a),a["default"].config.productionTip=!1,a["default"].prototype.$api=P,new a["default"]({router:x,store:O,render:e=>e(l)}).$mount("#app")},"85ec":function(e,t,r){}});
//# sourceMappingURL=app.3c862209.js.map