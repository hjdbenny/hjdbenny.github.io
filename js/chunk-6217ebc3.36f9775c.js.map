{"version":3,"sources":["webpack:///./src/views/Personal.vue?ece0","webpack:///./src/views/Personal.vue?23e6","webpack:///src/views/Personal.vue","webpack:///./src/views/Personal.vue?05cc","webpack:///./src/views/Personal.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","ref","attrs","$store","state","userInfo","rules","uploadUrl","uploadHeaders","handleAvatarSuccess","beforeAvatarUpload","avatarUrl","model","value","callback","$$v","$set","expression","staticStyle","on","$event","submitForm","staticRenderFns","component"],"mappings":"2IAAA,yBAA6gB,EAAG,G,2CCAhhB,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACF,EAAG,MAAM,CAACE,YAAY,SAAS,CAACN,EAAIO,GAAG,YAAYH,EAAG,UAAU,CAACI,IAAI,WAAWF,YAAY,WAAWG,MAAM,CAAC,MAAQT,EAAIU,OAAOC,MAAMC,SAAS,MAAQZ,EAAIa,MAAM,cAAc,UAAU,CAACT,EAAG,eAAe,CAACK,MAAM,CAAC,MAAQ,QAAQ,KAAO,WAAW,CAACL,EAAG,YAAY,CAACE,YAAY,kBAAkBG,MAAM,CAAC,OAAST,EAAIc,UAAU,OAAS,aAAa,QAAUd,EAAIe,cAAc,kBAAiB,EAAM,aAAaf,EAAIgB,oBAAoB,gBAAgBhB,EAAIiB,qBAAqB,CAAEjB,EAAa,UAAEI,EAAG,MAAM,CAACE,YAAY,SAASG,MAAM,CAAC,IAAMT,EAAIkB,aAAad,EAAG,IAAI,CAACE,YAAY,yCAAyC,GAAGF,EAAG,eAAe,CAACK,MAAM,CAAC,MAAQ,OAAO,KAAO,SAAS,CAACL,EAAG,WAAW,CAACe,MAAM,CAACC,MAAOpB,EAAIU,OAAOC,MAAMC,SAAa,KAAES,SAAS,SAAUC,GAAMtB,EAAIuB,KAAKvB,EAAIU,OAAOC,MAAMC,SAAU,OAAQU,IAAME,WAAW,iCAAiC,GAAGpB,EAAG,eAAe,CAACK,MAAM,CAAC,MAAQ,KAAK,KAAO,aAAa,CAACL,EAAG,WAAW,CAACe,MAAM,CAACC,MAAOpB,EAAIU,OAAOC,MAAMC,SAAiB,SAAES,SAAS,SAAUC,GAAMtB,EAAIuB,KAAKvB,EAAIU,OAAOC,MAAMC,SAAU,WAAYU,IAAME,WAAW,qCAAqC,GAAGpB,EAAG,eAAe,CAACK,MAAM,CAAC,MAAQ,KAAK,KAAO,QAAQ,CAACL,EAAG,kBAAkB,CAACK,MAAM,CAAC,IAAM,EAAE,IAAM,IAAIU,MAAM,CAACC,MAAOpB,EAAIU,OAAOC,MAAMC,SAAY,IAAES,SAAS,SAAUC,GAAMtB,EAAIuB,KAAKvB,EAAIU,OAAOC,MAAMC,SAAU,MAAOU,IAAME,WAAW,gCAAgC,GAAGpB,EAAG,eAAe,CAACqB,YAAY,CAAC,gBAAgB,MAAM,CAACrB,EAAG,YAAY,CAACK,MAAM,CAAC,KAAO,WAAWiB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAO3B,EAAI4B,WAAW,eAAe,CAAC5B,EAAIO,GAAG,SAAS,IAAI,IAAI,IACtqDsB,EAAkB,GC0BtB,GACA,OACA,OACA,6GACA,eACA,kBAEA,4CACA,OACA,MACA,+CACA,sDAEA,wDACA,uBAIA,SACA,uBACA,uBAEA,sBACA,+DACA,8BACA,qBAQA,OANA,GACA,yCAEA,GACA,yCAEA,MAEA,cACA,2BACA,MAGA,SAFA,yBAMA,iBACA,yEACA,oEACA,kCACA,kCAIA,UACA,sCChFkV,I,wBCQ9UC,EAAY,eACd,EACA/B,EACA8B,GACA,EACA,KACA,KACA,MAIa,aAAAC,E","file":"js/chunk-6217ebc3.36f9775c.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Personal.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Personal.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"personal-wrapper\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"编辑个人信息\")]),_c('el-form',{ref:\"infoForm\",staticClass:\"infoForm\",attrs:{\"model\":_vm.$store.state.userInfo,\"rules\":_vm.rules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\" 用户头像\",\"prop\":\"avatar\"}},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":_vm.uploadUrl,\"accept\":\"image/jpeg\",\"headers\":_vm.uploadHeaders,\"show-file-list\":false,\"on-success\":_vm.handleAvatarSuccess,\"before-upload\":_vm.beforeAvatarUpload}},[(_vm.avatarUrl)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.avatarUrl}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1),_c('el-form-item',{attrs:{\"label\":\"账户名称\",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.$store.state.userInfo.name),callback:function ($$v) {_vm.$set(_vm.$store.state.userInfo, \"name\", $$v)},expression:\"$store.state.userInfo.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"昵称\",\"prop\":\"nickname\"}},[_c('el-input',{model:{value:(_vm.$store.state.userInfo.nickname),callback:function ($$v) {_vm.$set(_vm.$store.state.userInfo, \"nickname\", $$v)},expression:\"$store.state.userInfo.nickname\"}})],1),_c('el-form-item',{attrs:{\"label\":\"年龄\",\"prop\":\"age\"}},[_c('el-input-number',{attrs:{\"min\":1,\"max\":99},model:{value:(_vm.$store.state.userInfo.age),callback:function ($$v) {_vm.$set(_vm.$store.state.userInfo, \"age\", $$v)},expression:\"$store.state.userInfo.age\"}})],1),_c('el-form-item',{staticStyle:{\"margin-bottom\":\"0\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('infoForm')}}},[_vm._v(\"保存\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div class=\"personal-wrapper\">\r\n\t\t<div class=\"title\">编辑个人信息</div>\r\n\t\t<el-form :model=\"$store.state.userInfo\" :rules=\"rules\" ref=\"infoForm\" label-width=\"100px\" class=\"infoForm\">\r\n\t\t\t<el-form-item label=\" 用户头像\" prop=\"avatar\">\r\n\t\t\t\t<el-upload class=\"avatar-uploader\" :action=\"uploadUrl\" accept=\"image/jpeg\" :headers=\"uploadHeaders\" :show-file-list=\"false\" :on-success=\"handleAvatarSuccess\" :before-upload=\"beforeAvatarUpload\">\r\n\t\t\t\t\t<img v-if=\"avatarUrl\" :src=\"avatarUrl\" class=\"avatar\">\r\n\t\t\t\t\t<i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n\t\t\t\t</el-upload>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"账户名称\" prop=\"name\">\r\n\t\t\t\t<el-input v-model=\"$store.state.userInfo.name\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"昵称\" prop=\"nickname\">\r\n\t\t\t\t<el-input v-model=\"$store.state.userInfo.nickname\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"年龄\" prop=\"age\">\r\n\t\t\t\t<el-input-number v-model=\"$store.state.userInfo.age\" :min=\"1\" :max=\"99\"></el-input-number>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item style=\"margin-bottom:0\">\r\n\t\t\t\t<el-button type=\"primary\" @click=\"submitForm('infoForm')\">保存</el-button>\r\n\t\t\t</el-form-item>\r\n\t\t</el-form>\r\n\r\n\t</div>\r\n</template>\r\n<script>\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tuploadUrl: `${process.env.VUE_APP_SERVER_URL}/api/common/uploadImage`,\r\n\t\t\tuploadHeaders: {\r\n\t\t\t\tAuthorization: ''\r\n\t\t\t},\r\n\t\t\tavatarUrl: this.$store.state.userInfo.avatar,\r\n\t\t\trules: {\r\n\t\t\t\tname: [\r\n\t\t\t\t\t{ required: true, message: '请输入账户名称', trigger: 'blur' },\r\n\t\t\t\t\t{ min: 3, max: 5, message: '长度在 3 到 5 个字符', trigger: 'blur' }\r\n\t\t\t\t],\r\n\t\t\t\tnickname: [{ required: true, message: '请输入昵称', trigger: 'blur' }],\r\n\t\t\t\tage: [{ required: true }]\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\thandleAvatarSuccess(res) {\r\n\t\t\tthis.avatarUrl = res.data\r\n\t\t},\r\n\t\tbeforeAvatarUpload(file) {\r\n\t\t\tthis.uploadHeaders.Authorization = localStorage.getItem('token')\r\n\t\t\tconst isJPG = file.type === 'image/jpeg'\r\n\t\t\tconst isLt2M = file.size / 1024 / 1024 < 2\r\n\r\n\t\t\tif (!isJPG) {\r\n\t\t\t\tthis.$message.error('上传头像图片只能是 JPG 格式!')\r\n\t\t\t}\r\n\t\t\tif (!isLt2M) {\r\n\t\t\t\tthis.$message.error('上传头像图片大小不能超过 2MB!')\r\n\t\t\t}\r\n\t\t\treturn isJPG && isLt2M\r\n\t\t},\r\n\t\tsubmitForm(formName) {\r\n\t\t\tthis.$refs[formName].validate(valid => {\r\n\t\t\t\tif (valid) {\r\n\t\t\t\t\tthis.updateUserInfo()\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\tupdateUserInfo() {\r\n\t\t\tthis.$store.commit('updateUserInfo', { key: 'avatar', value: this.avatarUrl })\r\n\t\t\tthis.$api.user.updateUserInfo(this.$store.state.userInfo).then(() => {\r\n\t\t\t\tthis.$router.push({ path: '/home' })\r\n\t\t\t\tthis.$message.success('更新成功')\r\n\t\t\t})\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\tthis.$store.dispatch('getUserInfo')\r\n\t}\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.personal-wrapper {\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\r\n\t.title {\r\n\t\tmargin-bottom: 16px;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\r\n\t.infoForm {\r\n\t\t.avatar-uploader .el-upload {\r\n\t\t\tborder: 1px dashed #000;\r\n\t\t\tborder-radius: 6px;\r\n\t\t\tcursor: pointer;\r\n\t\t\tposition: relative;\r\n\t\t\toverflow: hidden;\r\n\t\t}\r\n\t\t.avatar-uploader .el-upload:hover {\r\n\t\t\tborder-color: #409eff;\r\n\t\t}\r\n\t\t.avatar-uploader-icon {\r\n\t\t\tfont-size: 28px;\r\n\t\t\tcolor: #8c939d;\r\n\t\t\twidth: 128px;\r\n\t\t\theight: 128px;\r\n\t\t\tline-height: 128px;\r\n\t\t\ttext-align: center;\r\n\t\t}\r\n\t\t.avatar {\r\n\t\t\twidth: 128px;\r\n\t\t\theight: 128px;\r\n\t\t\tdisplay: block;\r\n\t\t}\r\n\t\t.el-form-item__label {\r\n\t\t\ttext-align: left;\r\n\t\t}\r\n\t}\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Personal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Personal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Personal.vue?vue&type=template&id=01aafcb5&\"\nimport script from \"./Personal.vue?vue&type=script&lang=js&\"\nexport * from \"./Personal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Personal.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}