(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64072301"],{"1af4":function(e,t,a){"use strict";a("3a42")},"3a42":function(e,t,a){},"90ab":function(e,t,a){"use strict";a.r(t);a("b0c0");var r=a("f2bf"),o={class:"personal-wrapper"},n=Object(r["createVNode"])("div",{class:"title"},"编辑个人信息",-1),c={key:1,class:"el-icon-plus avatar-uploader-icon"},s=Object(r["createTextVNode"])("保存");function u(e,t,a,u,l,i){var d=Object(r["resolveComponent"])("el-upload"),f=Object(r["resolveComponent"])("el-form-item"),m=Object(r["resolveComponent"])("el-input"),p=Object(r["resolveComponent"])("el-input-number"),b=Object(r["resolveComponent"])("a-button"),h=Object(r["resolveComponent"])("el-form");return Object(r["openBlock"])(),Object(r["createBlock"])("div",o,[n,Object(r["createVNode"])(h,{model:e.$store.state.userInfo,rules:l.rules,ref:"infoForm","label-width":"100px",class:"infoForm"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(f,{label:" 用户头像",prop:"avatar"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,{class:"avatar-uploader",action:l.uploadUrl,accept:"image/jpeg",headers:l.uploadHeaders,"show-file-list":!1,"on-success":i.handleAvatarSuccess,"before-upload":i.beforeAvatarUpload},{default:Object(r["withCtx"])((function(){return[l.avatarUrl?(Object(r["openBlock"])(),Object(r["createBlock"])("img",{key:0,src:l.avatarUrl,class:"avatar"},null,8,["src"])):(Object(r["openBlock"])(),Object(r["createBlock"])("i",c))]})),_:1},8,["action","headers","on-success","before-upload"])]})),_:1}),Object(r["createVNode"])(f,{label:"账户名称",prop:"name"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(m,{modelValue:e.$store.state.userInfo.name,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.$store.state.userInfo.name=t})},null,8,["modelValue"])]})),_:1}),Object(r["createVNode"])(f,{label:"昵称",prop:"nickname"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(m,{modelValue:e.$store.state.userInfo.nickname,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.$store.state.userInfo.nickname=t})},null,8,["modelValue"])]})),_:1}),Object(r["createVNode"])(f,{label:"年龄",prop:"age"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(p,{modelValue:e.$store.state.userInfo.age,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.$store.state.userInfo.age=t}),min:1,max:99},null,8,["modelValue"])]})),_:1}),Object(r["createVNode"])(f,{style:{"margin-bottom":"0"}},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(b,{type:"primary",onClick:t[4]||(t[4]=function(e){return i.submitForm("infoForm")})},{default:Object(r["withCtx"])((function(){return[s]})),_:1})]})),_:1})]})),_:1},8,["model","rules"])])}var l={data:function(){return{uploadUrl:"".concat("https://cloudbase-koa-2gj0jhjr761e287a.service.tcloudbase.com/koa-starter","/api/common/uploadImage"),uploadHeaders:{Authorization:""},avatarUrl:this.$store.state.userInfo.avatar,rules:{name:[{required:!0,message:"请输入账户名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}],nickname:[{required:!0,message:"请输入昵称",trigger:"blur"}],age:[{required:!0}]}}},methods:{handleAvatarSuccess:function(e){this.avatarUrl=e.data},beforeAvatarUpload:function(e){this.uploadHeaders.Authorization=localStorage.getItem("token");var t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.updateUserInfo()}))},updateUserInfo:function(){var e=this;this.$store.commit("updateUserInfo",{key:"avatar",value:this.avatarUrl}),this.$api.user.updateUserInfo(this.$store.state.userInfo).then((function(){e.$router.push({path:"/home"}),e.$message.success("更新成功")}))}},mounted:function(){this.$store.dispatch("getUserInfo")}};a("1af4");l.render=u;t["default"]=l},b0c0:function(e,t,a){var r=a("83ab"),o=a("9bf2").f,n=Function.prototype,c=n.toString,s=/^\s*function ([^ (]*)/,u="name";r&&!(u in n)&&o(n,u,{configurable:!0,get:function(){try{return c.call(this).match(s)[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-64072301.167a8837.js.map